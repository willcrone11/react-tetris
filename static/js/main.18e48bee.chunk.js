(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],{22:function(n,t,e){},26:function(n,t,e){"use strict";e.r(t);var r,i,o=e(0),c=e.n(o),a=e(10),s=e.n(a),u=(e(22),e(2)),d=function(){return Array.from(Array(20),(function(){return new Array(12).fill([0,"clear"])}))},l=function(n,t,e){for(var r=e.x,i=e.y,o=0;o<n.tetromino.length;o+=1)for(var c=0;c<n.tetromino[o].length;c+=1)if(0!==n.tetromino[o][c]&&(!t[o+n.pos.y+i]||!t[o+n.pos.y+i][c+n.pos.x+r]||"clear"!==t[o+n.pos.y+i][c+n.pos.x+r][1]))return!0;return!1},h=e(3),x=e(4),b=x.a.div(r||(r=Object(h.a)(["\n  width: 100vw;\n  height: 100vh;\n"]))),p=x.a.div(i||(i=Object(h.a)(["\n  display: flex;\n  align-items: flex-start;\n  padding: 40px;\n  margin: 0 auto;\n  max-width: 900px;\n\n  aside {\n    width: 100%;\n    max-width: 200px;\n    display: block;\n    padding: 0 20px;\n  }\n"])));var f,j,O,m,v=e(8),g={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 173, 36"},O:{shape:[["O","O"],["O","O"]],color:"223, 217, 36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48, 211, 56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227, 78, 78"}},w=function(){var n="IJLOSTZ",t=n[Math.floor(Math.random()*n.length)];return g[t]},y=function(n,t){var e=Object(o.useState)(d()),r=Object(u.a)(e,2),i=r[0],c=r[1],a=Object(o.useState)(0),s=Object(u.a)(a,2),l=s[0],h=s[1];return Object(o.useEffect)((function(){h(0);var e=function(e){var r=e.map((function(n){return n.map((function(n){return"clear"===n[1]?[0,"clear"]:n}))}));return n.tetromino.forEach((function(t,e){t.forEach((function(t,i){0!==t&&(r[e+n.pos.y][i+n.pos.x]=[t,"".concat(n.collided?"merged":"clear")])}))})),n.collided?(t(),function(n){return n.reduce((function(t,e){return-1===e.findIndex((function(n){return 0===n[0]}))?(h((function(n){return n+1})),t.unshift(new Array(n[0].length).fill([0,"clear"])),t):(t.push(e),t)}),[])}(r)):r};c((function(n){return e(n)}))}),[n.collided,n.pos.x,n.pos.y,n.tetromino,t]),[i,c,l]},S=x.a.div(f||(f=Object(h.a)(["\n  display: grid;\n  grid-template-rows: repeat(\n    ",",\n    calc 10vw / ","\n  );\n  grid-template-columns: repeat(",", 1fr);\n  grid-gap: 1px;\n  border: 2px solid #333;\n  width: 100%;\n  @media (min-width: 200px){\n    width: 80vw;\n    height: 200px;\n  }\n  @media (min-width: 300px){\n    width: 70vw;\n    height: 250px;\n  }\n  @media (min-width: 550px){\n    width: 70vw;\n    height: 400px;\n  }\n  @media (min-width: 700px){\n    width: 50vw;\n    height: 500px;\n  }\n  @media (min-width: 850px){\n    width: 40vw;\n    height: 550px;\n  }\n  @media (min-width: 1000px){\n    width: 35vw;\n    height: 550px;\n  }\n  @media (min-width: 1200px){\n    width: 30vw;\n    height: 550px;\n  }\n  @media (min-width: 1600px){\n    width: 30vw;\n    height: 700px;\n  }\n  width: 150vw;\n  height: 300px;\n  background: #111;\n"])),(function(n){return n.height}),(function(n){return n.width}),(function(n){return n.width})),E=x.a.div(j||(j=Object(h.a)(["\n  width: auto;\n  background: rgba(",", 0.8);\n  border: ",";\n  border-bottom-color: rgba(",", 0.1);\n  border-right-color: rgba(",", 1);\n  border-top-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.3);\n"])),(function(n){return n.color}),(function(n){return 0===n.type?"0px solid":"4px solid"}),(function(n){return n.color}),(function(n){return n.color}),(function(n){return n.color}),(function(n){return n.color})),k=e(1),I=function(n){var t=n.type;return Object(k.jsx)(E,{type:"J",color:g[t].color})},C=c.a.memo(I),J=function(n){var t=n.stage;return Object(k.jsx)(S,{width:t[0].length,height:t.length,children:t.map((function(n){return n.map((function(n,t){return Object(k.jsx)(C,{type:n[0]},t)}))}))})},T=x.a.div(O||(O=Object(h.a)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin: 0 0 20px 0;\n  padding: 20px;\n  border: 4px solid #333;\n  @media (min-width: 800px){\n    min-height: 30px;\n    width: 100%;\n  }\n  min-height: 10px;\n  width: 100%;\n  border-radius: 20px;\n  color: ",";\n  background: #000;\n  font-family: Pixel, Arial, Helvetica;\n  font-size: 0.8rem;\n"])),(function(n){return n.gameOver?"red":"#999"})),A=function(n){var t=n.gameOver,e=n.text;return Object(k.jsx)(T,{gameOver:t,children:e})},L=x.a.button(m||(m=Object(h.a)(["\n  box-sizing: border-box;\n  margin: 0 0 20px 0;\n  padding: 20px;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  border: none;\n  color: white;\n  background: #333;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 1rem;\n  outline: none;\n  cursor: pointer;\n"]))),N=e(14),P=e(15),Z=e(17),z=e(16),B=function(n){Object(Z.a)(e,n);var t=Object(z.a)(e);function e(){var n;Object(N.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))).state={isExpanded:!1},n.handleExpandEvent=function(){!1===n.state.isExpanded?n.setState({isExpanded:!0}):n.setState({isExpanded:!1})},n.renderExpandedComponent=function(){if(n.state.isExpanded)return Object(k.jsx)("p",{children:Object(k.jsxs)("ul",{children:[Object(k.jsx)("li",{children:"Use left/right arrow keys to move tetromino from side to side "}),Object(k.jsx)("br",{}),Object(k.jsx)("li",{children:"Use up arrow key to rotate tetromino"}),Object(k.jsx)("br",{}),Object(k.jsx)("li",{children:"Use down arrow key to move tetromino down at a faster rate"}),Object(k.jsx)("br",{}),Object(k.jsx)("li",{children:"Press shift key to send tetromino straight to the bottom"}),Object(k.jsx)("br",{}),Object(k.jsx)("li",{children:"Press space bar to restart game"})]})})},n.renderButtonText=function(){return n.state.isExpanded?"Hide Instructions":"Show Instructions"},n}return Object(P.a)(e,[{key:"render",value:function(){return Object(k.jsx)("div",{className:"instructions",children:Object(k.jsxs)("div",{className:"instructionsInner",children:[Object(k.jsx)("div",{children:this.renderExpandedComponent()}),Object(k.jsx)("button",{type:"button",className:"instructions-btn",onClick:this.handleExpandEvent,children:this.renderButtonText()})]})})}}]),e}(o.Component),F=function(n){var t=n.callback;return Object(k.jsxs)("div",{children:[Object(k.jsx)(L,{onClick:t,children:"Start Game"}),Object(k.jsx)(B,{})]})},U=function(){var n=Object(o.useState)(null),t=Object(u.a)(n,2),e=t[0],r=t[1],i=Object(o.useState)(!1),c=Object(u.a)(i,2),a=c[0],s=c[1],h=function(){var n=Object(o.useState)({pos:{x:0,y:0},tetromino:g[0].shape,collided:!1}),t=Object(u.a)(n,2),e=t[0],r=t[1];function i(n,t){var e=n.map((function(t,e){return n.map((function(n){return n[e]}))}));return t>0?e.map((function(n){return n.reverse()})):e.reverse()}var c=Object(o.useCallback)((function(){r({pos:{x:4,y:0},tetromino:w().shape,collided:!1})}),[]);return[e,function(n){var t=n.x,e=n.y,i=n.collided;r((function(n){return Object(v.a)(Object(v.a)({},n),{},{pos:{x:n.pos.x+=t,y:n.pos.y+=e},collided:i})}))},c,function(n,t){var o=JSON.parse(JSON.stringify(e));o.tetromino=i(o.tetromino,t);for(var c=o.pos.x,a=1;l(o,n,{x:0,y:0});)if(o.pos.x+=a,(a=-(a+(a>0?1:-1)))>o.tetromino[0].length)return i(o.tetromino,-t),void(o.pos.x=c);r(o)}]}(),x=Object(u.a)(h,4),f=x[0],j=x[1],O=x[2],m=x[3],S=y(f,O),E=Object(u.a)(S,3),I=E[0],C=E[1],T=function(n){var t=Object(o.useState)(0),e=Object(u.a)(t,2),r=e[0],i=e[1],c=Object(o.useState)(0),a=Object(u.a)(c,2),s=a[0],d=a[1],l=Object(o.useState)(0),h=Object(u.a)(l,2),x=h[0],b=h[1],p=[40,100,300,1200],f=Object(o.useCallback)((function(){n>0&&(i((function(t){return t+p[n-1]*(x+1)})),d((function(t){return t+n})))}),[x,p,n]);return Object(o.useEffect)((function(){f()}),[f,n,r]),[r,i,s,d,x,b]}(E[2]),L=Object(u.a)(T,6),N=L[0],P=L[1],Z=L[2],z=L[3],B=L[4],U=L[5],G=function(n){l(f,I,{x:n,y:0})||j({x:n,y:0})},H=function(){Z>10*(B+1)&&(U((function(n){return n+1})),r(1e3/(B+1)+200)),l(f,I,{x:0,y:1})?(f.pos.y<1&&(console.log("GAME OVER!!!"),s(!0),r(null)),j({x:0,y:0,collided:!0})):j({x:0,y:1,collided:!1})};!function(n,t){var e=Object(o.useRef)();Object(o.useEffect)((function(){e.current=n}),[n]),Object(o.useEffect)((function(){if(null!==t){var n=setInterval((function(){e.current()}),t);return function(){clearInterval(n)}}}),[t])}((function(){H()}),e);var M=function(n){var t=n.keyCode;a||(37===t?G(-1):39===t?G(1):40===t?(r(null),H()):38===t?m(I,1):16===t&&function(){for(var n=0;!l(f,I,{x:0,y:n});)n+=1;j({x:0,y:n-1,collided:!0})}())};return Object(k.jsx)(b,{role:"button",tabIndex:"0",onKeyDown:function(n){return M(n)},onKeyUp:function(n){var t=n.keyCode;a||40===t&&r(1e3/(B+1))},children:Object(k.jsxs)(p,{children:[Object(k.jsx)(J,{stage:I}),Object(k.jsxs)("aside",{children:[a?Object(k.jsx)(A,{gameOver:a,text:"Game Over"}):Object(k.jsxs)("div",{children:[Object(k.jsx)(A,{text:"Score: ".concat(N)}),Object(k.jsx)(A,{text:"rows: ".concat(Z)}),Object(k.jsx)(A,{text:"Level: ".concat(B)})]}),Object(k.jsx)(F,{callback:function(){C(d()),r(1e3),O(),P(0),U(0),z(0),s(!1)}})]})]})})},G=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(U,{})})},H=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,27)).then((function(t){var e=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;e(n),r(n),i(n),o(n),c(n)}))};s.a.render(Object(k.jsx)(G,{}),document.getElementById("root")),H()}},[[26,1,2]]]);
//# sourceMappingURL=main.18e48bee.chunk.js.map